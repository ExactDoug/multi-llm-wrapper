<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#2563eb">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>Multi-LLM Interface</title>
    <link rel="stylesheet" href="{{ url_for('static', path='css/layout.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', path='css/components.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', path='css/animations.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', path='css/responsive.css') }}">
</head>

<body>
    <div class="container">
        <!-- Top Section with Input and Synthesis -->
        <div class="top-section">
            <!-- User Input Section -->
            <div class="input-section" id="inputSection">
                <div class="section-header">
                    <h2>Query / Prompt</h2>
                    <div class="header-buttons">
                        <button class="expand-btn" id="query-expand" aria-label="Expand query view">üîç</button>
                        <button class="toggle-btn" id="toggleInput" aria-label="Toggle input section">‚ñº</button>
                    </div>
                </div>
                <div class="section-content">
                    <textarea id="userInput" placeholder="Enter your query here... (Press Shift+Enter for new line)"
                        rows="6" aria-label="Query input"></textarea>
                    <button id="sendButton">Send</button>
                </div>
            </div>

            <!-- Master Synthesizer Section -->
            <div class="synthesizer-section">
                <div class="section-header">
                    <h2>
                        <button class="copy-btn" data-copy="synthesis" title="Copy master synthesis"
                            aria-label="Copy master synthesis">üìã</button>
                        Master Synthesis
                    </h2>
                    <button class="expand-btn" id="synthesis-expand" aria-label="Expand synthesis view">üîç</button>
                </div>
                <div class="synthesizer-content markdown-body">
                    <!-- Synthesized content will be populated via JavaScript -->
                </div>
            </div>
        </div>

        <!-- Mobile Follow-up Button (hidden on desktop) -->
        <button id="followUpBtn" class="follow-up-btn" aria-label="Ask follow-up question">
            Ask Follow-up Question
        </button>

        <!-- LLM Windows Grid -->
        <div class="llm-grid">
            <!-- 9 LLM Windows -->
            {% for i in range(9) %}
            <div class="llm-window" id="llm-{{ i }}">
                <div class="llm-header">
                    <h2 class="llm-title">
                        <button class="copy-btn" data-copy="llm-{{ i }}" title="Copy LLM {{ i + 1 }} output"
                            aria-label="Copy LLM {{ i + 1 }} output">üìã</button>
                        LLM {{ i + 1 }}
                    </h2>
                    <button class="expand-btn" data-expand="llm-{{ i }}"
                        aria-label="Expand LLM {{ i + 1 }} view">üîç</button>
                </div>
                <div class="llm-content markdown-body">
                    <!-- Content will be populated via JavaScript -->
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Expanded Window Overlay -->
    <div id="overlay" class="overlay">
        <div class="expanded-window" role="dialog" aria-labelledby="expanded-title">
            <div class="expanded-header">
                <span class="expanded-title" id="expanded-title">LLM Response</span>
                <button class="close-btn" id="close-expanded" aria-label="Close expanded view">√ó</button>
            </div>
            <div class="expanded-content markdown-body">
                <!-- Expanded content will be populated via JavaScript -->
            </div>
        </div>
    </div>

    <!-- Load marked.js for Markdown rendering -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- Load main.js as a module -->
    <script type="module" src="{{ url_for('static', path='js/main.js') }}"></script>
</body>

</html>